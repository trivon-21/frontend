<div class="page-container">

  <h2 class="page-title">Verified Payments</h2>

  <div class="controls-row">

    <!-- Search -->
    <div class="search-wrapper">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
      <input
        type="text"
        placeholder="Search ID or Customer"
        [(ngModel)]="searchQuery"
        (input)="applyFilters()" />
    </div>

    <!-- Filters -->
    <div class="filters-section">
      <span class="filter-label">Filters:</span>

      <select [(ngModel)]="selectedFilter" (change)="applyFilters()">
        <option value="All">All</option>
        <option value="Approved">Approved</option>
      </select>

      <!-- Date Filter -->
      <input
        type="date"
        class="date-btn"
        [(ngModel)]="selectedDate"
        (change)="applyFilters()" />
    </div>

  </div>

  <!-- Table -->
  <div class="table-container">
    <table class="verified-table">
      <thead>
        <tr>
          <th>ORDER ID</th>
          <th>ITEM</th>
          <th>CUSTOMER</th>
          <th>DATE</th>
          <th>AMOUNT</th>
          <th>ACTION</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let payment of paginatedPayments">
          <td>{{ payment.orderId }}</td>
          <td>{{ payment.itemName || 'N/A' }}</td>
          <td>{{ payment.customerName }}</td>
          <td>{{ payment.updatedAt | date:'EEE, dd MMM yyyy' }}</td>
          <td class="amount">${{ payment.amount }}</td>
          <td>
            <button class="view-btn" (click)="openDetails(payment)">
              View
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <span>Showing {{ startItem }}-{{ endItem }} of {{ totalItems }} items</span>

    <div class="pages">
      <button (click)="prevPage()" [disabled]="currentPage===1">
        Previous
      </button>

      <button
        *ngFor="let page of totalPages"
        (click)="goToPage(page)"
        [class.active]="currentPage===page">
        {{ page }}
      </button>

      <button
        (click)="nextPage()"
        [disabled]="currentPage*itemsPerPage >= totalItems">
        Next
      </button>
    </div>
  </div>

  <div class="modal-overlay" *ngIf="showDetailsModal" (click)="closeModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Payment Details</h3>
        <button class="modal-close" (click)="closeModal()">âœ•</button>
      </div>

      <div class="modal-body">
        <p><strong>Order ID:</strong> {{ selectedPayment?.orderId }}</p>
        <p><strong>Customer:</strong> {{ selectedPayment?.customerName }}</p>
        <p><strong>Email:</strong> {{ selectedPayment?.customerEmail }}</p>
        <p><strong>Amount:</strong> ${{ selectedPayment?.amount }}</p>
        <p><strong>Status:</strong> {{ selectedPayment?.status }}</p>

        <a
          *ngIf="selectedPayment?.slipUrl"
          [href]="selectedPayment?.slipUrl"
          target="_blank"
          class="slip-link">
          View Slip Preview
        </a>
      </div>
    </div>
  </div>

</div>